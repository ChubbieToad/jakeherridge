
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title or site.title }}</title>
  <meta name="description" content="{{ description or site.description }}">

  <!-- OpenGraph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ (title or site.title) | safe }}">
  <meta property="og:description" content="{{ (description or site.description) | safe }}">
  <meta property="og:image" content="{{ ogImage or site.socialImage }}">
  <meta property="og:url" content="{{ page.url | url }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ (title or site.title) | safe }}">
  <meta name="twitter:description" content="{{ (description or site.description) | safe }}">
  <meta name="twitter:image" content="{{ ogImage or site.socialImage }}">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Theme init: prefer saved, else prefers-color-scheme
    (function() {
      const saved = localStorage.getItem('theme');
      if (saved) {
        document.documentElement.classList.toggle('dark', saved === 'dark');
      } else {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.classList.toggle('dark', prefersDark);
      }
    })();
  </script>
  <style>
    :root{
      --bg:#f7f7f7;
      --panel:#ffffff;
      --fg:#0d1b1e;
      --muted:#4b5563;
      --accent:#2f825e;
    }
    .dark:root, :root.dark{
      --bg:#0d1b1e;      /* deep forest */
      --panel:#1e2f32;   /* dark green panel */
      --fg:#ffffff;      /* text */
      --muted:#9aa6a9;   /* muted text */
      --accent:#2f825e;  /* green accent */
    }
    body{ background:var(--bg); color:var(--fg); }
    .panel{ background:var(--panel); }
  </style>
</head>
<body class="font-sans min-h-screen flex flex-col">
  <header class="panel sticky top-0 z-50">
    <div class="max-w-4xl mx-auto flex items-center justify-between p-4">
      <a href="/" class="text-lg font-bold">Jake Herridge</a>
      <div class="flex items-center gap-3">
        <button id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">ðŸŒ“</button>
        <button id="menu-btn" class="md:hidden">â˜°</button>
      </div>
      <nav id="menu" class="hidden md:flex gap-6">
        <a href="/" class="hover:underline">Home</a>
        <a href="/ideas/" class="hover:underline">Ideas</a>
        <a href="/links/" class="hover:underline">Cool Links</a>
        <a href="/about/" class="hover:underline">About</a>
      </nav>
    </div>
    <nav id="mobile-menu" class="hidden md:hidden panel">
      <div class="max-w-4xl mx-auto p-4 flex flex-col">
        <a href="/" class="py-2 hover:underline">Home</a>
        <a href="/ideas/" class="py-2 hover:underline">Ideas</a>
        <a href="/links/" class="py-2 hover:underline">Cool Links</a>
        <a href="/about/" class="py-2 hover:underline">About</a>
      </div>
    </nav>
  </header>

  <main class="flex-1">
    {{ content | safe }}
  </main>

  <footer class="panel mt-12">
    <div class="max-w-4xl mx-auto p-6 text-center text-[color:var(--muted)]">
      <form class="mb-4" method="post"
        {% if site.emailProvider == "buttondown" %}
          action="https://buttondown.email/api/emails/embed-subscribe/{{ site.email.buttondownSlug }}"
          target="popupwindow" onsubmit="window.open('https://buttondown.email/{{ site.email.buttondownSlug }}', 'popupwindow')"
        {% elif site.emailProvider == "mailchimp" %}
          action="{{ site.email.mailchimpAction }}"
        {% elif site.emailProvider == "beehiiv" %}
          action="https://api.beehiiv.com/v2/publications/{{ site.email.beehiivPublicationId }}/subscribe"
        {% else %}
          action="#"
        {% endif %}
      >
        <p>Subscribe for updates:</p>
        <input name="email" type="email" placeholder="Your email" class="mt-2 p-2 rounded text-black w-64 max-w-full" required />
        <button type="submit" class="ml-2 px-4 py-2 bg-[color:var(--accent)] rounded">Subscribe</button>
      </form>
      <p>&copy; <span id="year"></span> Jake Herridge</p>
    </div>
  </footer>

  <script>
  document.getElementById('menu-btn')?.addEventListener('click', ()=>{
    document.getElementById('mobile-menu')?.classList.toggle('hidden');
  });
  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });
  document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
